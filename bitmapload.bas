1070  input "Enter filename: ";file$1080  cls :print 1085  print file$1090  dim hdr(13),dib(39)1100  bload file$,$300001110  memcopy $30000,54 to $50001120  for n=0 to 131130  hdr(n)=peek($5000+n)1140  next 1145  '	"reading the bitmap file header"1150  if (hdr(0)<>$42)|(hdr(1)<>$4D):print "Not a .BMP!":stop :endif 1160  bmp_size=hdr(2)+(256*hdr(3))+(65536*hdr(4))+(4294967296*hdr(5))1170  '	"header 6,7,8,9 reserved"1180  offset=hdr(10)+(256*hdr(11))+(65536*hdr(12))+(4294967296*hdr(13))1200  '	"reading the dib header"1210  for n=0 to 391220  dib(n)=peek($5000+14+n)1230  next 1240  dib_size=dib(0)+(256*dib(1))+(65536*dib(2))+(4294967296*dib(3))1250  width=dib(4)+(256*dib(5))+(65536*dib(6))+(4294967296*dib(7))1260  height=dib(8)+(256*dib(9))+(65536*dib(10))+(4294967296*dib(11))1270  '	"planes 12,13"1280  bpp=dib(14)+(256*dib(15))1290  compr=dib(16)+(256*dib(17))+(65536*dib(18))+(4294967296*dib(19))1300  '	"image size 20,21,22,23"1310  '	"x pix/meter 24,25,26,27"1320  '	"y pix/meter 28,29,30,31"1330  colors=dib(32)+(256*dib(33))+(65536*dib(34))+(4294967296*dib(35))1340  '	"important colors 36,37,38,39"1342  err=01350  print "bitmap file size  ";bmp_size1351  print "pixel data offset ";offset1352  print "dib header size   ";dib_size1353  print "image width       ";width1354  print "image height      ";height1356  print "bits/plane        ";bpp1358  print "compression       ";compr1360  print "number of colors  ";colors1370  if (width<>320)|(height<>240) print "size error":err=1:endif 1380  if colors>256 print "color error":err=1:endif 1390  if err=1 then stop 1400  '	"load clut data"1410  memcopy $30000+14+dib_size,1024 to $50001420  poke 1,11430  for n=0 to 10231440  poke $D000+n,peek($5000+n)1450  next 1460  poke 1,01470  bitmap on :bitmap clear 01480  '	"move pixel data"1490  for y=0 to 2391510  memcopy $30000+offset+(y*320),320 to $10000+((239-y)*320)1530  next 1540  cls 